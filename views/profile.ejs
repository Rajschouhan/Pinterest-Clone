<% include ./partials/header.ejs %>
<!-- Tailwind CSS CDN -->
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">


<div class="w-full min-h-screen bg-gray-50 ">
   
    <!-- Profile Section -->
    <div class="max-w-2xl mx-auto text-center px-6">

    <!-- PROFILE IMAGE -->
    <div class="relative inline-block">
      <form id="uploadform" action="/fileupload" method="post" enctype="multipart/form-data" class="hidden">
        <input type="file" name="image">
      </form>

      <div class="w-32 h-32 sm:w-40 sm:h-40 rounded-full overflow-hidden shadow-xl border-4 border-white mx-auto">
        <img src="/images/uploads/<%= user.profileImage %>" class="w-full h-full object-cover" />
      </div>

      <button id="uploadicon"
        class="absolute bottom-2 right-2 bg-white p-2 rounded-full shadow hover:scale-105 transition">
        <i class="ri-pencil-line text-gray-600"></i>
      </button>
    </div>

    <!-- NAME -->
    <h1 class="mt-4 text-3xl font-bold text-gray-900">
      <%= user.fullname %>
    </h1>

    <p class="text-gray-500 text-sm mt-1">@<%= user.username %></p>

    <p class="mt-3 text-sm text-gray-700 max-w-md mx-auto">
      Find ideas you love, save what inspires you, and create something amazing.
    </p>

    <!-- STATS -->
    <!-- <div class="flex justify-center gap-10 mt-6">
      <div class="text-center">
        <p class="text-lg font-bold text-gray-900"><%= user.posts.length %></p>
        <p class="text-xs text-gray-500 uppercase tracking-wide">Pins</p>
      </div>
      <div class="text-center">
        <p class="text-lg font-bold text-gray-900">0</p>
        <p class="text-xs text-gray-500 uppercase tracking-wide">Followers</p>
      </div>
      <div class="text-center">
        <p class="text-lg font-bold text-gray-900">0</p>
        <p class="text-xs text-gray-500 uppercase tracking-wide">Following</p>
      </div>
    </div> -->

    <!-- ACTION -->
    <div class="mt-6">
      <a href="/add"
        class="inline-flex items-center gap-2 px-6 py-2 rounded-full bg-red-500 text-white text-sm font-semibold shadow hover:bg-red-600 transition">
        âž• Create Pin
      </a>
    </div>
  </div>
    <!-- Posts Section -->

<div class="max-w-6xl mx-auto py-4 px-6">
  <div class="columns-1 sm:columns-2 md:columns-3 lg:columns-4 gap-6">

    <% if(user.posts && user.posts.length > 0) { %>

      <div class="break-inside-avoid mb-6 max-w-sm mx-auto  pt-10 pb-10 rounded-lg">
        <div class="bg-zinc-100 overflow-hidden rounded-lg hover:shadow-xl">
          <img
            src="/images/uploads/<%= user.posts[0].img %>"
            class="w-full rounded-lg object-cover"
          />
          <a href="/show/posts" class="block text-xl font-semibold mt-3 px-3">
            Your Uploaded Pins
          </a>
          <h5 class="text-sm font-medium opacity-60 px-3 pb-3">
            <%= user.posts.length %> Pins
          </h5>
        </div>
      </div>

    <% } else { %>
      <div class="px-10 py-8 bg-gray-500 text-white font-bold">
        <p>No uploaded posts</p>
      </div>
    <% } %>

  </div>
</div>


</div>



<script>
    document.querySelector("#uploadicon").addEventListener("click",function(){
    document.querySelector("#uploadform input").click() ;
})
document.querySelector("#uploadform input").addEventListener("change", function(){
    document.querySelector("#uploadform").submit();
})
</script>
<!-- Bootstrap JS (retained for compatibility, though not heavily used) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous">
    
</script>
<% include ./partials/footer.ejs %>